# Spring Boot 应用配置
replicaCount: 1

image:
  repository: pengchaoma/springboot-todo-app
  pullPolicy: IfNotPresent
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  port: 8080
  targetPort: 8080

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: todo-app.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources:
  limits:
    memory: 512Mi
    cpu: 500m
  requests:
    memory: 256Mi
    cpu: 250m

nodeSelector: {}
tolerations: []
affinity: {}

# 应用配置
app:
  name: "spring-todo-app"
  port: 8080
  # 数据库连接配置（使用模板变量）
  database:
    host: "{{ .Release.Name }}-mysql"  # 使用 Helm Release 名称
    port: 3306
    name: "todo_db"
    username: "todo_user"
    password: "{{ .Values.mysql.auth.password }}"

# MySQL Chart 配置
mysql:
  enabled: true
  # 使用官方 MySQL 镜像（推荐）
  image:
    registry: docker.io
    repository: mysql
    tag: "8.0"   
    pullPolicy: IfNotPresent
  
  auth:
    database: "todo_db"
    username: "todo_user"
    password: "todo_password"  # 明确设置密码
    rootPassword: "root_password"  # 明确设置 root 密码
    existingSecret: ""
  
  primary:
    persistence:
      enabled: true
      size: 8Gi
      storageClass: "standard"  # Minikube 默认存储类
    resources:
      requests:
        memory: 256Mi
        cpu: 250m
      limits:
        memory: 512Mi
        cpu: 500m

